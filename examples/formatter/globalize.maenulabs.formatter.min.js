function Localizer(){}Localizer.prototype.format=function(b,c,a){return b.toString()};function Formatter(a){this.localizer=a}Formatter.SPECIFIER=/%(\d+\$)?\d*[a-zA-Z]+/g;Formatter.SPECIFIER_ARGUMENT_INDEX=/(\d+)\$/;Formatter.SPECIFIER_PRECISION=/(\d+)[a-zA-Z]+/;Formatter.SPECIFIER_CONVERSION=/([a-zA-Z]+)/;Formatter.prototype.format=function(){var o;var p=arguments[0];var d=[];for(o=1;o<arguments.length;o++){d.push(arguments[o])}var e=p.match(Formatter.SPECIFIER);if(!e){return p}var f=[];var n=p;for(o=0;o<e.length;o++){var k=n.split(e[o],1)[0];f.push(k);n=n.substring(k.length+e[o].length,n.length)}f.push(n);var h=[];var r=0;for(o=0;o<e.length;o++){var g=e[o];var a=g.match(Formatter.SPECIFIER_ARGUMENT_INDEX);var s=g.match(Formatter.SPECIFIER_CONVERSION);var l=g.match(Formatter.SPECIFIER_PRECISION);var c;var m;var q;if(a){c=parseInt(a[1])-1}else{c=r;r++}if(c>=d.length){throw new IllegalFormatError("argument index is too high")}m=s[1];if(l){q=parseInt(l[1])}var j;if(l){j=this.localizer.format(d[c],m,q)}else{j=this.localizer.format(d[c],m)}h.push(j)}var b="";for(o=0;o<e.length;o++){b+=f[o]+h[o]}b+=f[o];return b};function IllegalFormatError(a){Error.apply(this,arguments);this.message=a}IllegalFormatError.prototype=new Error();IllegalFormatError.prototype.constructor=IllegalFormatError;IllegalFormatError.prototype.name="IllegalFormatError";function GlobalizeLocalizer(a){Localizer.apply(this,arguments);this.culture=a}GlobalizeLocalizer.prototype=new Localizer();GlobalizeLocalizer.prototype.constructor=GlobalizeLocalizer;GlobalizeLocalizer.prototype.format=function(b,c,a){if(typeof b=="number"){if(a==undefined){return Globalize.format(b,c,this.culture)}else{return Globalize.format(b,c+a,this.culture)}}else{if(b instanceof Date){return Globalize.format(b,c,this.culture)}else{return b.toString()}}};var localizer=new GlobalizeLocalizer();var formatter=new Formatter(localizer);var localize=Globalize.localize;Globalize.localize=function(){if(arguments.length<2||typeof arguments[1]=="string"){return localize.apply(Globalize,arguments)}var e=arguments[0];var b=arguments[1];var a=arguments[2];var d=localize.apply(Globalize,[e,a]);var f=[d||e];for(var c=0;c<b.length;c++){f.push(b[c])}localizer.culture=a;return formatter.format.apply(formatter,f)};